(function(){angular.module("todo").directive("taskEditor",function(e){return{restrict:"E",scope:{task:"="},templateUrl:"app/views/task/edit.html",controller:function(t){t.checkKey=function(e){(e.which==27||e.which==9)&&t.cancelEdit()};t.edit=function(e){t.editing=!0;console.log("Trying to edit task")};t.initialize=function(){console.log("Loading category item");if(t.task){t.status=t.task.status;t.id=t.task.id;t.date_due=t.task.date_due;t.body=t.task.body;t.editing=t.task.editing?t.task.editing:!1;t.selected=!1}else{t.status=0;t.id=null;t.date_due="";t.body="";t.editing=!1;t.selected=!1}if(t.editing){changeSelected();t.selected=!0}console.log(t.selected)};t.save=function(n){console.log(n);t.editing=!1;e.saveCategory({id:t.id,label:$(n.target).find("input.category-label").val(),owner:t.owner}).then(function(e){console.log(e);t.label=e.data.label})};t.cancelEdit=function(){t.editing=!1};t.initialize()},controllerAs:"ti"}})})();